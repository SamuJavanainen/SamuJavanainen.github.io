<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
  <style>
    /* Chat-bubble style */
    .chat-bubble {
      display: none; /* Initially hidden */
      position: fixed;
      bottom: 60px;
      right: 90px;
      z-index: 9999;
      width: 150px; /* Adjust based on your image's dimensions */
      height: 150px; /* Adjust based on your image's dimensions */
      background: url('https://i.postimg.cc/jSFgMCjb/Projekti-Poista-tausta-5.png') no-repeat center center; /* Replace 'path_to_your_image.jpg' with your image path */
      background-color: blue;
      background-size: cover;
      cursor: pointer;
    }

    .close-button {
      position: absolute;
      top: 25px;
      left: 125px;
      cursor: pointer;
      font-size: 18px;
      background-color: transparent;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>

<!-- Chat-bubble -->
<div id="chat-bubble" class="chat-bubble" onclick="simulateBotpressButtonClick()">
  <span id="close-button" class="close-button" onclick="event.stopPropagation(); closeChatBubble();">×</span>
</div>

<!-- Hidden button to trigger Botpress chat -->
<button id="trigger-botpress-chat" style="display: none;"></button>

<script src="https://cdn.botpress.cloud/webchat/v0/inject.js"></script>
<script>
  window.botpressWebChat.init({
      "composerPlaceholder": "Kirjoita kysymyksesi",
      "botConversationDescription": "Astangajoogan chatbot avustaja",
      "botId": "25833d3f-cdca-4782-bbda-13d72dc6261b",
      "hostUrl": "https://cdn.botpress.cloud/webchat/v0",
      "messagingUrl": "https://messaging.botpress.cloud",
      "clientId": "25833d3f-cdca-4782-bbda-13d72dc6261b",
      "lazySocket": true,
      "botName": "Hanna",
      "avatarUrl": "https://astangajooga.fi/wp-content/themes/astanga2020/images/astanga-logo-mobile.png",
      "stylesheet": "https://webchat-styler-css.botpress.app/prod/code/906e85a6-ce83-4952-a04e-24a613b85645/v52285/style.css ",
      "frontendVersion": "v0",
      "useSessionStorage": true,
      "showBotInfoPage": true,
      "enableConversationDeletion": true
  });
  
function simulateBotpressButtonClick() {
    // Find the Botpress chat widget button by its class or ID (this might vary based on your Botpress version or setup)
    var botpressButton = document.querySelector('.bpw-widget-btn'); // This is a guess, you might need to inspect the Botpress button to get the correct class or ID

    // Simulate a click on the Botpress button
    if (botpressButton) {
        botpressButton.click();
    }

    // Hide the chat bubble
    document.getElementById('chat-bubble').style.display = 'none';
}

function closeChatBubble() {
    document.getElementById('chat-bubble').style.display = 'none';
}

  // Show the chat bubble after 5 seconds
  setTimeout(function() {
    document.getElementById('chat-bubble').style.display = 'block';
  }, 1000); // changed to 5 seconds

  // Event to close the chat bubble
  document.getElementById('close-button').addEventListener('click', function(event) {
    document.getElementById('chat-bubble').style.display = 'none';
    event.stopPropagation(); // Prevents the chat bubble click event from being triggered
  });
  
  }

    .close-button {
      position: absolute;
      top: 25px;
      left: 125px;
      cursor: pointer;
      font-size: 18px;
      background-color: transparent;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>

<!-- Chat-bubble -->
<div id="chat-bubble" class="chat-bubble" onclick="simulateBotpressButtonClick()">
  <span id="close-button" class="close-button" onclick="event.stopPropagation(); closeChatBubble();">×</span>
</div>

<!-- Hidden button to trigger Botpress chat -->
<button id="trigger-botpress-chat" style="display: none;"></button>

<script src="https://cdn.botpress.cloud/webchat/v0/inject.js"></script>
<script>
  window.botpressWebChat.init({
      "composerPlaceholder": "Kirjoita kysymyksesi",
      "botConversationDescription": "Astangajoogan chatbot avustaja",
      "botId": "25833d3f-cdca-4782-bbda-13d72dc6261b",
      "hostUrl": "https://cdn.botpress.cloud/webchat/v0",
      "messagingUrl": "https://messaging.botpress.cloud",
      "clientId": "25833d3f-cdca-4782-bbda-13d72dc6261b",
      "lazySocket": true,
      "botName": "Hanna",
      "avatarUrl": "https://astangajooga.fi/wp-content/themes/astanga2020/images/astanga-logo-mobile.png",
      "stylesheet": "https://webchat-styler-css.botpress.app/prod/code/906e85a6-ce83-4952-a04e-24a613b85645/v52285/style.css ",
      "frontendVersion": "v0",
      "useSessionStorage": true,
      "showBotInfoPage": true,
      "enableConversationDeletion": true
  });
  
function simulateBotpressButtonClick() {
    var botpressButton = document.querySelector('.bpw-widget-btn');
    if (botpressButton) {
        botpressButton.click();
    }
    hideChatBubble();
  }

  function hideChatBubble() {
    document.getElementById('chat-bubble').style.display = 'none';
  }

  function closeChatBubble() {
    document.getElementById('chat-bubble').style.display = 'none';
  }

  setTimeout(function() {
    document.getElementById('chat-bubble').style.display = 'block';
  }, 5000); // Show the chat bubble after 5 seconds

  document.getElementById('close-button').addEventListener('click', function(event) {
    closeChatBubble();
    event.stopPropagation();
  });

  document.querySelector('.bpw-widget-btn').addEventListener('click', hideChatBubble);
</script>
</body>
</html>
